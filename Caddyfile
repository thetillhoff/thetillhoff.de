# website
:80 {
  root * /usr/share/caddy
  file_server
  encode zstd gzip

  header {
    # enable HSTS
    Strict-Transport-Security max-age=31536000;

    # disable FLoC tracking
    Permissions-Policy interest-cohort=()

    # Enable cross-site filter (XSS)
    # and tell browser to block detected attacks
    X-Frame-Options "Deny"

    # disable clients from sniffing the media type
    X-Content-Type-Options nosniff

    # set csp
    Content-Security-Policy "default-src 'self'; style-src 'self'; script-src 'self'; font-src 'self'; img-src 'self'; form-action 'self'; connect-src 'self'; frame-ancestors 'none';"
  }
}

# healtchcheck
:8080 {
  respond "I'm healthy!"
}
